require "test_helper"

class ExploitationsControllerTest < ActionDispatch::IntegrationTest
  setup do
    @exploitation = exploitations(:one)
  end

  test "should get index" do
    get exploitations_url
    assert_response :success
  end

  test "should get new" do
    get new_exploitation_url
    assert_response :success
  end

  test "should create exploitation" do
    assert_difference("Exploitation.count") do
      post exploitations_url, params: { exploitation: { artist: @exploitation.artist, description: @exploitation.description, format: @exploitation.format, licence_id: @exploitation.licence_id, title: @exploitation.title } }
    end

    assert_redirected_to exploitation_url(Exploitation.last)
  end

  test "should show exploitation" do
    get exploitation_url(@exploitation)
    assert_response :success
  end

  test "should get edit" do
    get edit_exploitation_url(@exploitation)
    assert_response :success
  end

  test "should update exploitation" do
    patch exploitation_url(@exploitation), params: { exploitation: { artist: @exploitation.artist, description: @exploitation.description, format: @exploitation.format, licence_id: @exploitation.licence_id, title: @exploitation.title } }
    assert_redirected_to exploitation_url(@exploitation)
  end

  test "should destroy exploitation" do
    assert_difference("Exploitation.count", -1) do
      delete exploitation_url(@exploitation)
    end

    assert_redirected_to exploitations_url
  end
end
